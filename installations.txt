# Enable metallb for load balancing (this will handle your external IP) on server
enable metallb

# Enable ingress controller on server
enable ingress

# Check that all pods are running
kubectl get pods -A

# Check that ingress controller is running
kubectl get pods -n ingress

# Check metallb status should be 2 pods controller and speaker
kubectl get pods -n metallb-system

# Check if the ingress controller service got the external IP
kubectl get svc -n ingress

# Deploy all whoami components at once
kubectl apply -f whoami-complete.yaml


# Specifically look at the controller DaemonSet
kubectl get daemonset -n ingress
kubectl describe daemonset ingress-nginx-controller -n ingress | grep -i 'hostnetwork\|image'

# List the Service(s) it created
kubectl get svc -n ingress
kubectl describe svc ingress-nginx-controller -n ingress

# Confirm if itâ€™s using hostNetwork (common for MicroK8s)
kubectl get pods -n ingress -o yaml | grep -m1 -i hostNetwork

# Check arguments passed to the controller
kubectl logs -n ingress -l app=ingress-nginx --tail=50 | grep -- '--ingress-class'