# Enable metallb for load balancing (this will handle your external IP) on server
microk8s enable metallb

# Enable ingress controller on server
microk8s enable ingress

# Check that all pods are running
kubectl get pods -A

# Check that ingress controller is running
kubectl get pods -n ingress

# Check metallb status
kubectl get pods -n metallb-system

# Check if the ingress controller service got the external IP
kubectl get svc -n ingress

# Deploy all whoami components at once
kubectl apply -f whoami-complete.yaml



# Enable ingress (also ensure metallb is already enabled if you want a LoadBalancer IP later)
microk8s enable ingress

# See what resources appeared in the 'ingress' namespace
microk8s kubectl get all -n ingress

# Specifically look at the controller DaemonSet
microk8s kubectl get daemonset -n ingress
microk8s kubectl describe daemonset ingress-nginx-controller -n ingress | grep -i 'hostnetwork\|image'

# List the Service(s) it created
microk8s kubectl get svc -n ingress
microk8s kubectl describe svc ingress-nginx-controller -n ingress

# Confirm if itâ€™s using hostNetwork (common for MicroK8s)
microk8s kubectl get pods -n ingress -o yaml | grep -m1 -i hostNetwork

# Check arguments passed to the controller
microk8s kubectl logs -n ingress -l app=ingress-nginx --tail=50 | grep -- '--ingress-class'